# 第8章 複数テーブルの結合
SQLのさまざまな機能や構文について学んできましたが、その殆どは、単一のテーブルに対するものでした。

さらにデータベースの実力を最大限に引き出すためには、複数テーブルに分けて格納されたデータを同時に取り出す「結合」の活用が欠かせません。

本格的な家計簿データベースの実現に向け、複数テーブルの取り扱い方を学びましょう。

<details><summary>8.1 「リレーショナル」の意味</summary>

### 8.1.1 RDBMSの真の実力
- **これまで学んだこと**
    
    **第Ⅰ部 データの格納と取り出しについて**
    
    - 4代命令でテーブルにデータを出し入れできる(第2章)。
    - WHERE句で処理対象行を絞り込める(第3章)。
    - ORDER BYやDISTINCTで検索結果に追加の処理を施せる(第4章)。
    
    **第Ⅱ部 データの取得と同時に計算や処理をさせる方法**
    
    - 式や関数を用いて、計算や集計をさせることができる(第5、6章)。
    - 一度行った検索結果を用いて、データを操作できる(第7章)。
    
    これらは**データベースの機能のうち特に学びやすい一部だけを選んだ**ものです。つまり、データベースに真の実力を発揮させるための機能や構文は、まだ紹介していません。
    
- **データベースの優位性**
    
    データを安全、確実、高速に取り扱うために生まれたデータベースは、表計算ソフトにはないさまざまな機能を備えている。

### 8.1.2 複数テーブルへのデータ格納
新しい家計簿テーブルでは、費目列が費目ID列になり、その内容がただの数字になっています。この数字は「費目テーブル(テーブル8-3)におけるIDが2の行(つまり、食費の行)」を指し示しています。

### 8.1.3 外部キーとリレーションシップ
「ID」列は費目テーブルの主キーなので重複はありえません。そのためIDの値が決まればどの行を意味するかが確定します。つまり、家計簿テーブルの各行では、費目IDを指定してあげることで、費目テーブルのどの1行を指し示すかを明確に指定することができるのです。

家計簿テーブルからは費目の名前は消えてしまいましたが、費目テーブルのIDを辿ることで費目の名前がわかるようになっているのです。

「家計簿テーブル」と「費目テーブル」のように、ある2つのテーブルの行に情報としての関連がある場合、その関連を**リレーションシップ**(relationship)といいます。

また、家計簿テーブルの「費目ID」列のように、ほかのテーブルの関連行を指すための値を格納することでリレーションシップを結ぶ役割を担っている列のことを**外部キー**(foreign key)といいます。
- **外部キー列の役割**
    
    外部キー列は、他テーブルのある列(主キー列など)の値を格納することによって、「その行が他テーブルのどの行と関連しているか」を明らかにする。
